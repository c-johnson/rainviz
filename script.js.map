{"version":3,"sources":["script.coffee"],"names":[],"mappings":"AAAA,IAAA,4BAAA;EAAA;;AAAM;EACS,oBAAC,MAAD;;IACX,IAAC,CAAA,OAAD,GACE;MAAA,MAAA,EAAQ,mBAAR;MACA,UAAA,EAAY;QAAC;UACX,MAAA,EAAQ,SADG;UAEX,QAAA,EAAU,EAFC;UAGX,UAAA,EACE;YAAA,MAAA,EAAQ,SAAR;YACA,aAAA,EAAe,MADf;WAJS;SAAD;OADZ;;IASF,IAAC,CAAA,YAAD,CAAc,MAAd;EAXW;;uBAab,IAAA,GAAM,SAAA;AACJ,QAAA;AAAA,8EAAyB,CAAE;EADvB;;uBAGN,aAAA,GAAe,SAAC,GAAD,EAAM,SAAN;AACb,QAAA;IAAA,IAAG,OAAA,qCAAkB,CAAE,QAAS,CAAA,GAAA,UAAhC;;YACkB,CAAE,WAAlB,GAAgC;;MAChC,OAAO,CAAC,MAAR,GAAiB,MAAA,GAAS;AAE1B;WAAA,2CAAA;;QACE,IAAA,GAAO,QAAQ,CAAC;QAChB,GAAA,GAAM,QAAQ,CAAC;QAEf,MAAM,CAAC,IAAP,GAAiB,MAAM,CAAC,IAAP,GAAc,IAAjB,GAA2B,MAAM,CAAC,IAAlC,GAA4C;QAC1D,MAAM,CAAC,IAAP,GAAiB,MAAM,CAAC,IAAP,GAAc,IAAjB,GAA2B,MAAM,CAAC,IAAlC,GAA4C;QAC1D,MAAM,CAAC,IAAP,GAAiB,MAAM,CAAC,IAAP,GAAc,GAAjB,GAA0B,MAAM,CAAC,IAAjC,GAA2C;qBACzD,MAAM,CAAC,IAAP,GAAiB,MAAM,CAAC,IAAP,GAAc,GAAjB,GAA0B,MAAM,CAAC,IAAjC,GAA2C;AAP3D;qBAJF;;EADa;;uBAcf,YAAA,GAAc,SAAC,SAAD,EAAY,KAAZ;AACZ,QAAA;IAAA,IAAG,KAAH;aAAc,IAAC,CAAA,aAAD,CAAe,KAAf,EAAsB,SAAtB,EAAd;KAAA,MAAA;AAEE;WAAS,sFAAT;qBACE,IAAC,CAAA,aAAD,CAAe,CAAf,EAAkB,SAAlB;AADF;qBAFF;;EADY;;;;;;AAMV;EACS,mBAAA;IACX,IAAC,CAAA,eAAD,CAAA;EADW;;sBAIb,eAAA,GAAiB,SAAA;WACf,EAAE,CAAC,GAAH,CAAO,uBAAP,EAAgC,SAAC,IAAD;AAC9B,UAAA;MAAA,OAAA,GAAc,IAAA,UAAA,CAAW,CAAC,CAAC,GAAF,CAAM,IAAN,EAAY,SAAC,GAAD;eAAS;UAAC,GAAA,EAAK,GAAG,CAAC,GAAV;UAAe,IAAA,EAAM,GAAG,CAAC,IAAzB;;MAAT,CAAZ,CAAX;MAEd,MAAM,CAAC,IAAP,GAAc;MAEd,UAAA,GAAa,EAAE,CAAC,GAAG,CAAC,SAAP,CAAA;aACb,GAAA,GAAM,EAAE,CAAC,MAAH,CAAU,aAAV,CAAwB,CAAC,MAAzB,CAAgC,KAAhC,CAAsC,CAAC,MAAvC,CAA8C,QAA9C,CAAuD,CAAC,IAAxD,CAA6D,GAA7D,EAAiE,CAAjE,CAAmE,CAAC,IAApE,CAAyE,WAAzE,EAAsF,SAAA;AAAM,eAAO,YAAA,GAAe,UAAA,CAAW,CAAC,CAAC,EAAF,EAAK,EAAL,CAAX,CAAf,GAAsC;MAAnD,CAAtF;IANwB,CAAhC;EADe;;sBASjB,YAAA,GAAc,SAAA;IACZ,EAAE,CAAC,GAAH,CAAO,gBAAP,EAAyB,SAAC,IAAD;AACvB,UAAA;MAAA,UAAA,GAAa,IAAK,CAAA,IAAI,CAAC,MAAL,GAAc,CAAd,CAAgB,CAAC;MACnC,UAAA,GAAa,IAAK,CAAA,CAAA,CAAE,CAAC;MACrB,GAAA,GAAM,EAAE,CAAC,MAAH,CAAU,WAAV,CAAsB,CAAC,MAAvB,CAA8B,KAA9B,CAAoC,CAAC,IAArC,CAA0C,OAA1C,EAAmD,SAAnD,CAA6D,CAAC,KAA9D,CAAoE,SAApE,EAA+E,CAA/E;MACN,EAAE,CAAC,MAAH,CAAU,WAAV,CAAsB,CAAC,SAAvB,CAAiC,KAAjC,CAAuC,CAAC,IAAxC,CAA6C,IAA7C,CAAkD,CAAC,KAAnD,CAAA,CAA0D,CAAC,MAA3D,CAAkE,KAAlE,CAAwE,CAAC,OAAzE,CAAiF,UAAjF,EAA6F,IAA7F;MACA,EAAE,CAAC,SAAH,CAAa,WAAb,CAAyB,CAAC,MAA1B,CAAiC,KAAjC,CAAuC,CAAC,OAAxC,CAAgD,KAAhD,EAAuD,IAAvD,CAA4D,CAAC,KAA7D,CAAmE,kBAAnE,EAAuF,SAAC,CAAD;QACrF,IAAG,CAAC,CAAC,WAAF,IAAiB,MAApB;AACE,iBAAO,QADT;SAAA,MAEK,IAAG,CAAC,CAAC,WAAF,GAAgB,MAAhB,IAA2B,CAAC,CAAC,WAAF,IAAiB,MAA/C;AACH,iBAAO,SADJ;SAAA,MAEA,IAAG,CAAC,CAAC,WAAF,GAAgB,MAAhB,IAA2B,CAAC,CAAC,WAAF,IAAiB,OAA/C;AACH,iBAAO,SADJ;SAAA,MAEA,IAAG,CAAC,CAAC,WAAF,GAAgB,OAAnB;AACH,iBAAO,MADJ;;MAPgF,CAAvF,CAUC,CAAC,KAVF,CAUQ,QAVR,EAUkB,SAAC,CAAD;AAChB,YAAA;QAAA,OAAA,GAAU,CAAC,CAAC,WAAF,GAAgB;QAC1B,SAAA,GAAY,OAAA,GAAU;eACtB,SAAA,GAAY,EAAZ,GAAiB;MAHD,CAVlB,CAcC,CAAC,EAdF,CAcK,WAdL,EAckB,SAAC,CAAD;QAChB,GAAG,CAAC,UAAJ,CAAA,CAAgB,CAAC,QAAjB,CAA0B,CAA1B,CAA4B,CAAC,KAA7B,CAAmC,SAAnC,EAA8C,EAA9C;QACA,GAAG,CAAC,IAAJ,CAAS,CAAC,CAAC,WAAF,GAAgB,OAAhB,GAA0B,UAAnC,CAA8C,CAAC,KAA/C,CAAqD,MAArD,EAA6D,EAAE,CAAC,KAAK,CAAC,KAAT,GAAiB,IAA9E,CAAmF,CAAC,KAApF,CAA0F,KAA1F,EAAiG,EAAE,CAAC,KAAK,CAAC,KAAT,GAAiB,EAAjB,GAAsB,IAAvH;MAFgB,CAdlB,CAkBC,CAAC,EAlBF,CAkBK,UAlBL,EAkBiB,SAAC,CAAD;QACf,GAAG,CAAC,UAAJ,CAAA,CAAgB,CAAC,QAAjB,CAA0B,CAA1B,CAA4B,CAAC,KAA7B,CAAmC,SAAnC,EAA8C,CAA9C;MADe,CAlBjB;MAqBA,EAAE,CAAC,SAAH,CAAa,WAAb,CAAyB,CAAC,MAA1B,CAAiC,GAAjC,CAAqC,CAAC,OAAtC,CAA8C,OAA9C,EAAuD,IAAvD,CAA4D,CAAC,IAA7D,CAAkE,SAAC,IAAD;eAChE,IAAI,CAAC;MAD2D,CAAlE;IA1BuB,CAAzB;WA6BA,OAAO,CAAC,GAAR,CAAY,6BAAZ,EAA2C,EAA3C;EA9BY;;;;;;AAgChB,KAAA,GAAQ,IAAI","file":"script.js","sourceRoot":"/source/","sourcesContent":["class GeoPolygon\n  constructor: (coords) ->\n    @geoJson =\n      \"type\": \"FeatureCollection\"\n      \"features\": [{\n        \"type\": \"Feature\"\n        \"bounds\": []\n        \"geometry\":\n          \"type\": \"Polygon\"\n          \"coordinates\": coords\n    }]\n\n    @updateCoords(coords)\n\n  fLen: () ->\n    return @geoJson?.features?.length\n\n  updateFeature: (ind, newCoords) ->\n    if feature = @geoJson?.features[ind]\n      feature.geometry?.coordinates = newCoords\n      feature.bounds = bounds = {}\n\n      for newCoord in newCoords\n        long = newCoord.long\n        lat = newCoord.lat\n\n        bounds.xMin = if bounds.xMin < long then bounds.xMin else long\n        bounds.xMax = if bounds.xMax > long then bounds.xMax else long\n        bounds.yMin = if bounds.yMin < lat then bounds.yMin else lat\n        bounds.yMax = if bounds.yMax > lat then bounds.yMax else lat\n\n  updateCoords: (newCoords, index) =>\n    if index then @updateFeature(index, newCoords)\n    else\n      for i in [0..@fLen()]\n        @updateFeature(i, newCoords)\n\nclass RainThing\n  constructor: () ->\n    @californication()\n    # @refugeeChart()\n\n  californication: () ->\n    d3.csv 'data/cal-boundary.csv', (data) ->\n      geoCali = new GeoPolygon(_.map data, (dat) -> {lat: dat.lat, long: dat.long})\n\n      window.Cali = geoCali\n\n      projection = d3.geo.albersUsa()\n      div = d3.select('#california').append('svg').append(\"circle\").attr(\"r\",5).attr(\"transform\", () -> return \"translate(\" + projection([-75,43]) + \")\";)\n\n  refugeeChart: () ->\n    d3.csv 'data/chart.csv', (data) ->\n      refugeeMax = data[data.length - 1].numRefugees\n      refugeeMin = data[0].numRefugees\n      div = d3.select('.the-data').append('div').attr('class', 'tooltip').style('opacity', 0)\n      d3.select('.the-data').selectAll('div').data(data).enter().append('div').classed 'data-row', true\n      d3.selectAll('.data-row').append('div').classed('bar', true).style('background-color', (d) ->\n        if d.numRefugees <= 100000\n          return 'green'\n        else if d.numRefugees > 100000 and d.numRefugees <= 500000\n          return 'yellow'\n        else if d.numRefugees > 500000 and d.numRefugees <= 2000000\n          return 'orange'\n        else if d.numRefugees > 2000000\n          return 'red'\n        return\n      ).style('height', (d) ->\n        percent = d.numRefugees / refugeeMax\n        barHeight = percent * 250\n        barHeight + 10 + 'px'\n      ).on('mouseover', (d) ->\n        div.transition().duration(0).style 'opacity', .9\n        div.html(d.numRefugees + '<br/>' + 'refugees').style('left', d3.event.pageX + 'px').style 'top', d3.event.pageY - 28 + 'px'\n        return\n      ).on 'mouseout', (d) ->\n        div.transition().duration(0).style 'opacity', 0\n        return\n      d3.selectAll('.data-row').append('p').classed('label', true).text (data) ->\n        data.date\n      return\n    console.log 'you are now rocking with d3', d3\n\nthing = new RainThing\n"]}